
첨부하신 대본 내용을 바탕으로 구글 드라이브 MCP 서버를 로컬에 설치하는 가이드를 작성해드리겠습니다. 마크다운 포맷으로 내용만 작성하겠습니다.

# 구글 드라이브 MCP 서버 설치 가이드

이 가이드는 Claude 데스크톱에서 구글 드라이브와 연동할 수 있는 MCP(Model Context Protocol) 서버를 로컬에 설치하고 사용하는 방법을 안내합니다.

## 목차
- [소개](#소개)
- [사전 요구사항](#사전-요구사항)
- [설치 과정](#설치-과정)
  - [1. 구글 클라우드 프로젝트 설정](#1-구글-클라우드-프로젝트-설정)
  - [2. 소스코드 다운로드](#2-소스코드-다운로드)
  - [3. 서버 설치](#3-서버-설치)
  - [4. 클로드 데스크톱 설정](#4-클로드-데스크톱-설정)
- [확장 기능 추가](#확장-기능-추가)
- [사용 예시](#사용-예시)
- [한계점](#한계점)
- [FAQ](#faq)

## 소개

Claude나 ChatGPT 같은 AI 서비스를 사용할 때 가장 불편한 점 중 하나는 내 컴퓨터의 파일 시스템이나 구글 드라이브 같은 파일 스토리지에 직접 접근할 수 없다는 것입니다. MCP 서버를 설치하면 이러한 제약을 극복하고 AI가 구글 드라이브의 파일을 읽고, 쓰고, 수정하는 작업을 수행할 수 있습니다.

로컬에 MCP 서버를 설치하는 이유:
1. **디버깅 용이성**: 문제 발생 시 직접 수정하고 해결할 수 있습니다.
2. **커스터마이징**: 인증 파일 추가 및 코드 수정을 통해 기능을 확장할 수 있습니다.

## 사전 요구사항

- Claude 데스크톱 앱 설치
- Node.js 설치
- VS Code 또는 다른 코드 에디터
- 인터넷 연결

## 설치 과정

### 1. 구글 클라우드 프로젝트 설정

1. [Google Cloud Console](https://console.cloud.google.com)에 접속하여 새 프로젝트를 생성합니다.

2. Google Drive API 활성화:
   - 왼쪽 메뉴에서 'API 및 서비스' > '라이브러리' 선택
   - 'Google Drive API' 검색 후 선택
   - '사용 설정' 버튼 클릭

3. OAuth 동의 화면 설정:
   - 왼쪽 메뉴에서 'API 및 서비스' > 'OAuth 동의 화면' 선택
   - '외부'를 선택하고 '만들기' 클릭
   - 필수 정보 입력 (앱 이름, 사용자 지원 이메일 등)
   - '저장 후 계속' 클릭

4. 테스트 사용자 추가:
   - '테스트 사용자' 섹션에서 '+ 테스트 사용자 추가' 클릭
   - 본인 이메일 주소 입력 후 저장

5. 데이터 접근 권한 설정:
   - '범위 추가 또는 삭제' 클릭
   - `https://www.googleapis.com/auth/drive` 권한 추가 (전체 드라이브 접근)
   - '저장 후 계속' 클릭

6. OAuth 클라이언트 ID 생성:
   - 왼쪽 메뉴에서 'API 및 서비스' > '사용자 인증 정보' 선택
   - '+ 사용자 인증 정보 만들기' > 'OAuth 클라이언트 ID' 클릭
   - 애플리케이션 유형에서 '데스크톱 앱' 선택
   - 이름 입력 후 '만들기' 클릭
   - 생성된 OAuth 클라이언트 JSON 파일 다운로드

7. 다운로드한 JSON 파일의 이름을 `gcp-oauth.keys.json`으로 변경합니다.

### 2. 소스코드 다운로드

1. [MCP 서버 GitHub 저장소](https://github.com/anthropics/anthropic-mcp-servers)에 접속합니다.

2. 'Code' 버튼을 클릭하고 'Download ZIP'을 선택하여 소스코드를 다운로드합니다.

3. 다운로드한 ZIP 파일을 원하는 위치에 압축 해제합니다.

4. 이전 단계에서 다운로드하고 이름을 변경한 `gcp-oauth.keys.json` 파일을 압축 해제한 폴더(servers-main)의 최상위 디렉토리에 복사합니다. (src 폴더나 gdrive 폴더 안이 아닌, 최상위 폴더에 위치해야 합니다.)

### 3. 서버 설치

1. VS Code를 실행하고 압축 해제한 폴더(servers-main)를 엽니다.

2. VS Code에서 터미널을 열고(상단 메뉴 '터미널' > '새 터미널') 다음 명령어를 순서대로 실행합니다:

   ```bash
   # Google Drive 폴더로 이동
   cd src/gdrive
   
   # 필요한 패키지 설치
   npm install
   
   # 인증 설정
   node ./dist auth
   
   # 서버 빌드
   npm run build
   ```

3. 인증 과정에서 브라우저 창이 열리면 본인의 Google 계정으로 로그인하고 필요한 권한을 허용합니다.

4. `.gdrive-server-credentials.json` 파일이 생성되었는지 확인합니다. 이 파일의 `scope` 값이 `auth/drive`로 되어 있는지 확인하세요 (`readonly`가 아닌지 확인).

### 4. 클로드 데스크톱 설정

1. Claude 데스크톱 앱을 실행합니다.

2. 설정 탭으로 이동하여 '개발자' 섹션에서 '설정 편집'을 클릭합니다.

3. `claude_desktop-config.json` 파일이 열리면 다음과 같이 수정합니다:

   ```json
   "mcpServers": {
     "gdrive": {
       "command": "[설치경로]\\servers-main\\node_modules\\.bin\\mcp-server-gdrive.cmd",
       "args": ["-y"]
     }
   }
   ```

   - Mac의 경우: `"command": "/path/to/servers-main/node_modules/.bin/mcp-server-gdrive"`
   - Windows의 경우: `"command": "D:\\path\\to\\servers-main\\node_modules\\.bin\\mcp-server-gdrive.cmd"` (슬래시를 두 개 사용)

4. 파일을 저장하고 Claude 데스크톱을 완전히 종료한 후 다시 실행합니다.

5. 도구 목록에 Google Drive 관련 도구가 추가되었는지 확인합니다.

## 확장 기능 추가

기본 Google Drive MCP 서버는 검색 기능만 제공합니다. 문서 읽기, 생성, 수정, 삭제, token refresh 등의 기능을 추가하려면 코드를 확장해야 합니다.

1. 확장된 기능이 포함된 소스 코드(`index.ts`)를 다운로드합니다.

2. 다운로드한 파일을 `src/gdrive` 폴더에 복사하여 기존 파일을 덮어씁니다.

3. 터미널에서 다음 명령어를 실행하여 인증 정보와 서버를 업데이트합니다:

   ```bash
   # Google Drive 폴더로 이동
   cd src/gdrive
   
   # 인증 다시 설정
   node ./dist auth
   
   # 서버 다시 빌드
   npm run build
   ```

4. `.gdrive-server-credentials.json` 파일의 `scope` 값이 `auth/drive`로 되어 있는지 확인합니다.

5. Claude 데스크톱을 재시작하면 확장된 기능을 사용할 수 있습니다.

## 사용 예시

### 파일 검색

```
구글드라이브에서 "ai_chatbot_guide.md" 문서를 찾아줘.
```

### 문서 읽기

```
해당 문서를 읽어줘.
```

### 문서 수정 및 업로드

```
이 계약서에서 보완이 필요한 영역에 대해 제안해줘.
이 보완사항을 반영해서, html output format으로 작성하고, 그 포맷의 내용을 "계약서_샘플_수정본.docx"로 구글드라이브에 저장해줘.
```

### 문서 삭제

```
"계약서_샘플" 문서를 삭제해줘.
```

## 한계점

현재 MCP 서버 사용에는 몇 가지 제약이 있습니다:

1. **무료 버전 제약**: 무료 버전의 Claude는 콘텍스트 길이가 제한되어 MCP 서버가 제대로 작동하지 않을 수 있습니다.

2. **동시 사용 제약**: 여러 MCP 서버를 동시에 등록하면 메시지 전송이 불가능할 수 있습니다.

3. **파일 크기 제한**: 큰 용량의 파일(대용량 PDF, 엑셀 파일 등)은 처리하기 어렵습니다.

4. **미디어 인식 한계**: 영상이나 이미지 파일 내용 인식은 현재 지원되지 않습니다.

이러한 한계에도 불구하고, 텍스트 파일 작업, 코드 작업, 파일 정리 작업 등에는 효과적으로 활용할 수 있습니다.

## FAQ

### Q: MCP 서버란 무엇인가요?
A: MCP(Model Context Protocol)는 AI가 다양한 서비스와 효율적으로 소통할 수 있도록 도와주는 프로토콜입니다. MCP 서버를 설치하면 AI가 구글 드라이브와 같은 외부 서비스에 접근할 수 있습니다.

### Q: 다른 MCP 서버도 설치할 수 있나요?
A: 네, 파일 시스템, 노션, 슬랙 등 다양한 MCP 서버를 설치할 수 있습니다. 그러나 여러 서버를 동시에 사용할 경우 무료 버전의 경우 성능 이슈가 발생할 수 있습니다.

### Q: 인증 정보를 업데이트하려면 어떻게 해야 하나요?
A: `node ./dist auth` 명령어를 실행하여 인증 정보를 업데이트할 수 있습니다.

### Q: 확장 기능 코드는 어디서 구할 수 있나요?
A: 확장 기능 코드는 이 저장소의 `index.ts`에서 찾을 수 있습니다.